[Settings]
[build]
  publish = "dist"
  functions = "functions/"

# Production context: all deploys from the Production branch
# set in your site’s Branches settings in the UI
# will inherit these settings.
[context.production]
  command = "npm run generate && echo 'You are in PRODUCTION context'"
  environment = { NUXT_ENV = "production", AUTH0_DOMAIN = "https://grandgarage.eu.auth0.com", URL = "https://grandgarage.eu"}

# Specific branch context: all deploys from
# this specific branch will inherit these settings.
[context.staging] # “staging” is a branch name
  command = "npm run generate-staging && cp _branchdeploy_headers dist/_headers  && echo 'You are in STAGING context'"
[context.staging.environment]
  NUXT_ENV = "staging"
  AUTH0_DOMAIN = "https://gg-staging.eu.auth0.com"
  URL = "https://staging.grandgarage.eu"
  CONNECTOR_DOMAIN = "https://connector.staging.grandgarage.eu"